"use client";

import { RankingItem } from '@prisma/client';
import { useRouter } from 'next/navigation';
import { useState } from 'react';

export function GuessButton({ rankingId, options, index }: { rankingId: string, options: RankingItem[], index: number }) {

    return (
        <button
            className='shadow-lg aspect-video p-8 text-3xl font-extrabold rounded-md transition-all bg-neutral-700 text-neutral-50 hover:bg-neutral-600 hover:shadow-xl'
            onClick={click}>
            {options[index].text}
        </button>
    );
}

export function GuessButtonContainer({ rankingId, options }: { rankingId: string, options: RankingItem[] }) {
    const [loading, setLoading] = useState(false);
    const choices = options.map(x => x.id);
    const router = useRouter();

    const query = async () => {
        await fetch("/api/vote", {
            method: "POST",
            body: JSON.stringify({
                rankingId,
                choices,
                index
            })
        });

        router.refresh();
    };

    return (
        <div className="grid grid-cols-2 w-full gap-8 mb-4">
            <GuessButton rankingId={rankingId} options={options} onClick={() => {

            }} />
            <GuessButton rankingId={rankingId} options={options} onClick={() => {

            }} />
        </div>
    );
}
